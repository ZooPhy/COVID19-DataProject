# COVID-19 Data Project

## Introduction

This project, led by Dr. Matthew Scotch at Arizona State University, aims to utilize and quantify the impact of predictor data of SARS-CoV-2 in phylogeographic (GLM) models. This GitHub repository contains data at both the county and the state level that either pertain to, or are affected by COVID-19, ranging from total COVID-19 deaths to population density.  

## Installation and Setup

1. Clone the git repository using the following command
```
git clone https://github.com/ZooPhy/COVID19-DataProject.git
```
1b. Start clean enviornment
```
source ./test_venv/bin/activate
```

2. Make sure that pip and Python 3.7 (or greater) are both installed. Documentation for installing Python can be found at https://www.python.org/downloads/ and instructions for pip can be found at https://pip.pypa.io/en/stable/installing/.
3. Make sure that numpy, pandas, and sodapy are installed using the following commands
```
pip3 install pandas
pip3 install numpy
pip3 install sodapy
pip3 install dask
```
4. Make sure that 'wget' is installed:
```
brew install wget
```
5. Within the directory `COVID19-DataProject/codebase/travel`, edit lines 15-17 in `travel.py` to include your individual Socrata username, password, and token ID. This username and password can be generated by creating a Socrata account at https://data.bts.gov/Research-and-Statistics/Trips-by-Distance/w96p-f2qv/data. In order to generate a unique app token, go to `My Profile` > `Edit Profile` > `Developer Settings`. Within Developer Settings, click on `Create New App Token` and fill in the information. Fill in this info in lines 15-17 in `travel.py`. Line 15 must also be changed in `vaccine.py`.

6. After setting up `travel.py`, the program can be run. From within the folder `codebase`, run the command `python run.py` to execute the program and generate a file with the aggregated travel, climate, and covid-19 data. This data file with be titled based on the day that the data was pulled. For example, data pulled on December 10th 2020 will be named `20201210.csv`. The individual scripts can be found within their respective subdirectories.

## Running the program

These are the scripts run by `run.py` (in order).

### downloadClimateData.bash 
This bash script is used to download a sorted list of the climate data based on FIPS county code. This climate data comes from the Global Historical Climatology Network - Daily (GHCN-Daily) datasets. Both the maximum daily temperature and the daily total precipitation are added to our data set.

### covid.py
Python script for downloading COVID-19 case and death data. The COVID-19 case and death data comes from the Johns Hopkins Whiting School of Engineering and their source code and be found here https://github.com/CSSEGISandData/COVID-19.

### travel.py
This python script is used to download travel data. The travel data is sourced from the Bureau of Transportation Statistics and their data source can be found here https://data.bts.gov/Research-and-Statistics/Trips-by-Distance/w96p-f2qv/data. 

### climate.py
This is used to find the median and mean temperature and percipitation for each US county, starting from the beginning of 2020 to the current date.

### merge.py
This python script is used to merge the travel and case data. The output is a csv file titled with the current date. This is the complete aggregate data file.

## Dependencies
Below is a description of the dependencies needed for each of the scripts above.

### FIPSMetadata.csv
Data file with FIPS code for each US county. Needed for `covid.py`.

### StationMetadata.csv
Data file with Station Name and associated county. Needed for `downloadClimateData.bash`.

### us_census_2018_population_estimates_counties.csv
Information about population density comes from the 2018 USA Census and the data source is from the COVID tracking project that provides an online resource for population density download, which can be found here https://github.com/COVID19Tracking/associated-data/blob/master/us_census_data/us_census_2018_population_estimates_counties.csv. Needed for `merge.py`.

